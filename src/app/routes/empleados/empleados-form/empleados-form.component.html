<form nz-form [formGroup]="form" (ngSubmit)="submit()" [nzLayout]="'horizontal'">

  <div nz-row nzType="flex" nzJustify="space-between">

    <div nz-col [nzXs]="{ span: 24 }" [nzMd]="{ span: 11 }">
      <nz-form-item>
        <nz-form-label nzRequired>{{ 'global.nombre' | translate }}</nz-form-label>
        <nz-form-control nzHasFeedback [nzErrorTip]="requiredErrorTpl">
          <input nz-input formControlName="nombre" />
        </nz-form-control>
      </nz-form-item>
    </div>

    <div nz-col [nzXs]="{ span: 24 }" [nzMd]="{ span: 11 }">
      <nz-form-item>
        <nz-form-label nzRequired>{{ 'global.apellido' | translate }}</nz-form-label>
        <nz-form-control nzHasFeedback [nzErrorTip]="requiredErrorTpl">
          <input nz-input formControlName="apellido" />
        </nz-form-control>
      </nz-form-item>
    </div>

    <div nz-col [nzXs]="{ span: 24 }" [nzMd]="{ span: 11 }">
      <nz-form-item>
        <nz-form-label nzRequired>{{ 'global.dni' | translate }}</nz-form-label>
        <nz-form-control nzHasFeedback [nzErrorTip]="requiredErrorTpl">
          <input nz-input formControlName="dni" />
        </nz-form-control>
      </nz-form-item>
    </div>

    <div nz-col [nzXs]="{ span: 24 }" [nzMd]="{ span: 11 }">
      <nz-form-item>
        <nz-form-label nzRequired>{{ 'global.cuil' | translate }}</nz-form-label>
        <nz-form-control nzHasFeedback [nzErrorTip]="requiredErrorTpl">
          <input nz-input formControlName="cuil" />
        </nz-form-control>
      </nz-form-item>
    </div>

    <div nz-col [nzXs]="{ span: 24 }" [nzMd]="{ span: 11 }">
      <nz-form-item>
        <nz-form-label nzRequired nzFor="fecha_nacimiento">{{ 'global.fecha_nacimiento' | translate }}
        </nz-form-label>
        <nz-form-control nzHasFeedback>
          <nz-date-picker style="width:100%;" [nzStyle]="{width: '100%'}" formControlName="fecha_nacimiento"
            nzFormat="dd-MM-yyyy">
          </nz-date-picker>
          <nz-form-explain *ngIf="form.get('fecha_nacimiento').dirty && form.get('fecha_nacimiento').errors">
            <ng-container *ngIf="form.get('fecha_nacimiento').hasError('required')">
              {{ 'global.campo_requerido' | translate }}
            </ng-container>
          </nz-form-explain>
        </nz-form-control>
      </nz-form-item>
    </div>

    <div nz-col [nzXs]="{ span: 24 }" [nzMd]="{ span: 11 }">
      <nz-form-item>
        <nz-form-label nzRequired>{{ 'global.numero_legajo' | translate }}</nz-form-label>
        <nz-form-control nzHasFeedback [nzErrorTip]="requiredErrorTpl">
          <input nz-input formControlName="numero_legajo" />
        </nz-form-control>
      </nz-form-item>
    </div>

    <div nz-col [nzXs]="{ span: 24 }" [nzMd]="{ span: 11 }">
      <nz-form-item>
        <nz-form-label nzRequired>{{ 'global.estado' | translate }}</nz-form-label>
        <nz-form-control nzHasFeedback>
          <nz-select formControlName="id_estado_empleado">
            <ng-container *ngFor="let estadoEmpleado of estadoEmpleados">
              <nz-option *ngIf="!isLoading" [nzValue]="estadoEmpleado.id" [nzLabel]="estadoEmpleado.display">
              </nz-option>
            </ng-container>
            <nz-option *ngIf="isLoading" nzDisabled nzCustomContent>
              <i nz-icon type="loading" class="loading-icon"></i> {{"global.cargando" | translate}}
            </nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </div>

    <div nz-col [nzXs]="{ span: 24 }" [nzMd]="{ span: 11 }">
      <nz-form-item>
        <nz-form-label nzRequired>{{ 'global.funcion_profesional' | translate }}</nz-form-label>
        <nz-form-control nzHasFeedback>
          <nz-select formControlName="id_funcion_profesional" nzShowSearch [nzServerSearch]="true"
            (nzOnSearch)="searchFuncionesProfesionales($event)">
            <ng-container *ngFor="let funcionProfesional of funcionesProfesionales">
              <nz-option *ngIf="!isLoading" [nzValue]="funcionProfesional.id" [nzLabel]="funcionProfesional.display">
              </nz-option>
            </ng-container>
            <nz-option *ngIf="isLoading" nzDisabled nzCustomContent>
              <i nz-icon type="loading" class="loading-icon"></i> {{"global.cargando" | translate}}
            </nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </div>

    <div nz-col [nzXs]="{ span: 24 }" [nzMd]="{ span: 11 }">
      <nz-form-item>
        <nz-form-label nzRequired>{{ 'global.activo' | translate }}</nz-form-label>
        <nz-form-control nzHasFeedback [nzErrorTip]="requiredErrorTpl">
          <input nz-input formControlName="activo" />
        </nz-form-control>
      </nz-form-item>
    </div>

    <div nz-col [nzXs]="{ span: 24 }" [nzMd]="{ span: 11 }">
      <nz-form-item>
        <nz-form-label nzRequired>{{ 'global.consorcio' | translate }}</nz-form-label>
        <nz-form-control nzHasFeedback>
          <nz-select formControlName="id_consorcio" nzShowSearch [nzServerSearch]="true"
            (nzOnSearch)="searchConsorcios($event)">
            <ng-container *ngFor="let consorcio of consorcios">
              <nz-option *ngIf="!isLoading" [nzValue]="consorcio.id" [nzLabel]="consorcio.display"></nz-option>
            </ng-container>
            <nz-option *ngIf="isLoading" nzDisabled nzCustomContent>
              <i nz-icon type="loading" class="loading-icon"></i> {{"global.cargando" | translate}}
            </nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </div>

  </div>
</form>

<div class="footer">
  <div nz-row nzType="flex" nzJustify="space-between">
    <button nz-button [disabled]="!form.valid" (click)="submit()" class="ant-btn ant-btn-primary">
      <span>{{ 'global.guardar' | translate }}</span>
    </button>
  </div>
</div>

<ng-template #requiredErrorTpl let-control>
  <ng-container *ngIf="control.hasError('required')">
    {{ 'global.campo_requerido' | translate }}
  </ng-container>
</ng-template>
